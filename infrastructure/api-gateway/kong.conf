# Kong Configuration File
# This file contains Kong's core configuration

# Database configuration
database = postgres
pg_host = kong-database
pg_port = 5432
pg_user = kong
pg_password = kong_dev_password
pg_database = kong

# Proxy settings
proxy_listen = 0.0.0.0:8000
proxy_listen_ssl = 0.0.0.0:8443

# Admin API settings
admin_listen = 0.0.0.0:8001
admin_listen_ssl = 0.0.0.0:8444
admin_gui_listen = 0.0.0.0:8002

# Logging
log_level = notice
proxy_access_log = /dev/stdout
proxy_error_log = /dev/stderr
admin_access_log = /dev/stdout
admin_error_log = /dev/stderr

# Nginx settings
nginx_worker_processes = auto
nginx_daemon = off

# Memory cache
mem_cache_size = 128m

# SSL settings
# Cloudflare Origin Certificate paths
# Certificates should be mounted from volume or copied during container startup
ssl_cert = /usr/local/kong/ssl/cloudflare-origin.crt
ssl_cert_key = /usr/local/kong/ssl/cloudflare-origin.key

# Fallback to default certificate if Cloudflare certificate not available
# ssl_cert = /usr/local/kong/ssl/kong-default.crt
# ssl_cert_key = /usr/local/kong/ssl/kong-default.key

# Trusted IPs (for real IP detection behind proxies)
trusted_ips = 0.0.0.0/0

# Real IP header
real_ip_header = X-Forwarded-For
real_ip_recursive = on

